{"version":3,"sources":["webpack:///./server/renderedPageRouter.jsx?d701"],"names":["renderedPageRouter","Router","get","req","res","routes","location","url","error","redirectLocation","renderProps","status","send","message","redirect","pathname","search","componentsWithData","components","filter","c","dataFetcher","dataFetchers","map","params","urlBase","Promise","all","then","dataList","initialState","forEach","namedData","Object","assign","html","catch","console","log","err"],"mappings":";;;;;;;;;;;;AAAA;;;;AACA;;AACA;;AAEA;;;;AAEA;;;;AACA;;;;AACA;;;;;;AAEA,KAAMA,qBAAqB,IAAIC,iBAAJ,EAA3B;;AAEAD,oBAAmBE,GAAnB,CAAuB,GAAvB,EAA4B,UAACC,GAAD,EAAMC,GAAN,EAAc;AACxC,2BAAM,EAAEC,wBAAF,EAAUC,UAAUH,IAAII,GAAxB,EAAN,EAAqC,UAACC,KAAD,EAAQC,gBAAR,EAA0BC,WAA1B,EAA0C;AAC7E,SAAIF,KAAJ,EAAW;AACTJ,WAAIO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBJ,MAAMK,OAA3B;AACD,MAFD,MAEO,IAAIJ,gBAAJ,EAAsB;AAC3BL,WAAIU,QAAJ,CAAa,GAAb,EAAkBL,iBAAiBM,QAAjB,GAA4BN,iBAAiBO,MAA/D;AACD,MAFM,MAEA,IAAIN,WAAJ,EAAiB;AACtB,WAAMO,qBAAqBP,YAAYQ,UAAZ,CAAuBC,MAAvB,CAA8B;AAAA,gBAAKC,EAAEC,WAAP;AAAA,QAA9B,CAA3B;AACA,WAAMC,eAAeL,mBAAmBM,GAAnB,CAAuB;AAAA,gBAAKH,EAAEC,WAAF,CAAc;AAC7DG,mBAAQd,YAAYc,MADyC,EACjClB,UAAUI,YAAYJ,QADW;AAE7DmB,oBAAS;AAFoD,UAAd,CAAL;AAAA,QAAvB,CAArB;AAIAC,eAAQC,GAAR,CAAYL,YAAZ,EAA0BM,IAA1B,CAA+B,UAACC,QAAD,EAAc;AAC3C,aAAIC,eAAe,EAAnB;AACAD,kBAASE,OAAT,CAAiB,UAACC,SAAD,EAAe;AAC9BF,0BAAeG,OAAOC,MAAP,CAAcJ,YAAd,EAA4BE,SAA5B,CAAf;AACD,UAFD;AAGA,aAAMG,OAAO,4BACX;AAAC,mCAAD;AAAA,aAAgB,cAAcL,YAA9B;AACE,yCAAC,0BAAD,EAAmBpB,WAAnB;AADF,UADW,CAAb;AAKAN,aAAIO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,wBAASuB,IAAT,EAAeL,YAAf,CAArB;AACD,QAXD,EAYCM,KAZD,CAYO,eAAO;AACZC,iBAAQC,GAAR,iCAA0CC,GAA1C;AACD,QAdD;AAeD,MArBM,MAqBA;AACLnC,WAAIO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,WAArB;AACD;AACF,IA7BD;AA8BD,EA/BD;;mBAiCeZ,kB","file":"0.0941a23e52c0205ef000.hot-update.js","sourcesContent":["import React from 'react';\nimport { renderToString } from 'react-dom/server';\nimport { match, RouterContext } from 'react-router';\n\nimport Router from 'express';\n\nimport template from './template.js';\nimport routes from '../src/Routes.jsx';\nimport ContextWrapper from '../src/ContextWrapper.jsx';\n\nconst renderedPageRouter = new Router();\n\nrenderedPageRouter.get('*', (req, res) => {\n  match({ routes, location: req.url }, (error, redirectLocation, renderProps) => {\n    if (error) {\n      res.status(500).send(error.message);\n    } else if (redirectLocation) {\n      res.redirect(302, redirectLocation.pathname + redirectLocation.search);\n    } else if (renderProps) {\n      const componentsWithData = renderProps.components.filter(c => c.dataFetcher);\n      const dataFetchers = componentsWithData.map(c => c.dataFetcher({\n        params: renderProps.params, location: renderProps.location,\n        urlBase: 'http://localhost:3000',\n      }));\n      Promise.all(dataFetchers).then((dataList) => {\n        let initialState = {};\n        dataList.forEach((namedData) => {\n          initialState = Object.assign(initialState, namedData);\n        });\n        const html = renderToString(\n          <ContextWrapper initialState={initialState} >\n            <RouterContext {...renderProps} />\n          </ContextWrapper>\n        );\n        res.status(200).send(template(html, initialState));\n      })\n      .catch(err => {\n        console.log(`Error rendering to string: ${err}`);\n      });\n    } else {\n      res.status(404).send('Not found');\n    }\n  });\n});\n\nexport default renderedPageRouter;\n\n\n// WEBPACK FOOTER //\n// ./server/renderedPageRouter.jsx"],"sourceRoot":""}