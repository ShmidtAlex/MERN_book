{"version":3,"sources":["../server/issue.js"],"names":["Object","defineProperty","exports","value","validIssueStatus","New","Open","Assigned","Fixed","Verified","Closed","issueFieldType","status","owner","effort","created","completionDate","title","cleanupIssue","issue","cleanedUpIssue","keys","forEach","field","validateIssue","errors","push","length","join","convertIssue","Date","default"],"mappings":"AAAA;;AAEAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,SAAO;AADoC,CAA7C;;AAIA,IAAIC,mBAAmB;AACrBC,OAAK,IADgB;AAErBC,QAAM,IAFe;AAGrBC,YAAU,IAHW;AAIrBC,SAAO,IAJc;AAKrBC,YAAU,IALW;AAMrBC,UAAQ;AANa,CAAvB;AAQA,IAAIC,iBAAiB;AACnBC,UAAQ,UADW;AAEnBC,SAAO,UAFY;AAGnBC,UAAQ,UAHW;AAInBC,WAAS,UAJU;AAKnBC,kBAAgB,UALG;AAMnBC,SAAO;AANY,CAArB;AAQA;AACA;AACA,SAASC,YAAT,CAAsBC,KAAtB,EAA6B;AAC3B,MAAIC,iBAAiB,EAArB;AACApB,SAAOqB,IAAP,CAAYF,KAAZ,EAAmBG,OAAnB,CAA2B,UAAUC,KAAV,EAAiB;AAC1C,QAAIZ,eAAeY,KAAf,CAAJ,EAA2B;AACzBH,qBAAeG,KAAf,IAAwBJ,MAAMI,KAAN,CAAxB;AACD;AACF,GAJD;AAKA,SAAOH,cAAP;AACD;;AAED,SAASI,aAAT,CAAuBL,KAAvB,EAA8B;AAC5B,MAAIM,SAAS,EAAb;AACAzB,SAAOqB,IAAP,CAAYV,cAAZ,EAA4BW,OAA5B,CAAoC,UAAUC,KAAV,EAAiB;AACnD,QAAIZ,eAAeY,KAAf,MAA0B,UAA1B,IAAwC,CAACJ,MAAMI,KAAN,CAA7C,EAA2D;AACzDE,aAAOC,IAAP,CAAY,8BAA8BH,KAA1C;AACD;AACF,GAJD;AAKA,MAAI,CAACnB,iBAAiBe,MAAMP,MAAvB,CAAL,EAAqC;AACnCa,WAAOC,IAAP,CAAYP,MAAMP,MAAN,GAAe,yBAA3B;AACD;AACD,SAAOa,OAAOE,MAAP,GAAgBF,OAAOG,IAAP,CAAY,IAAZ,CAAhB,GAAoC,IAA3C;AACD;AACD,SAASC,YAAT,CAAsBV,KAAtB,EAA6B;AAC3B,MAAIA,MAAMJ,OAAV,EAAmB;AACjBI,UAAMJ,OAAN,GAAgB,IAAIe,IAAJ,CAASX,MAAMJ,OAAf,CAAhB;AACD;AACD,MAAII,MAAMH,cAAV,EAA0B;AACxBG,UAAMH,cAAN,GAAuB,IAAIc,IAAJ,CAASX,MAAMH,cAAf,CAAvB;AACD;AACD,SAAOE,aAAaC,KAAb,CAAP;AACD;AACDjB,QAAQ6B,OAAR,GAAkB;AAChBP,iBAAeA,aADC;AAEhBN,gBAAcA,YAFE;AAGhBW,gBAAcA;AAHE,CAAlB;AAKA","file":"issue.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar validIssueStatus = {\n  New: true,\n  Open: true,\n  Assigned: true,\n  Fixed: true,\n  Verified: true,\n  Closed: true\n};\nvar issueFieldType = {\n  status: \"required\",\n  owner: \"required\",\n  effort: \"optional\",\n  created: \"required\",\n  completionDate: \"optional\",\n  title: \"required\"\n};\n//validateIssue has to be decoupled to two functions for eslint validation\n//'fucntion parameter reassignment is disallowed'\nfunction cleanupIssue(issue) {\n  var cleanedUpIssue = {};\n  Object.keys(issue).forEach(function (field) {\n    if (issueFieldType[field]) {\n      cleanedUpIssue[field] = issue[field];\n    }\n  });\n  return cleanedUpIssue;\n}\n\nfunction validateIssue(issue) {\n  var errors = [];\n  Object.keys(issueFieldType).forEach(function (field) {\n    if (issueFieldType[field] === 'required' && !issue[field]) {\n      errors.push(\"Missing mandatory field: \" + field);\n    }\n  });\n  if (!validIssueStatus[issue.status]) {\n    errors.push(issue.status + \" is not a valid status.\");\n  }\n  return errors.length ? errors.join('; ') : null;\n}\nfunction convertIssue(issue) {\n  if (issue.created) {\n    issue.created = new Date(issue.created);\n  }\n  if (issue.completionDate) {\n    issue.completionDate = new Date(issue.completionDate);\n  }\n  return cleanupIssue(issue);\n}\nexports.default = {\n  validateIssue: validateIssue,\n  cleanupIssue: cleanupIssue,\n  convertIssue: convertIssue\n};\n//# sourceMappingURL=issue.js.map"]}